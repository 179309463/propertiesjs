# file: shippable.yml

# language setting
language: node_js

# version numbers, testing against two versions of node
node_js:
  - 0.10.35
#  - 0.11

#specify the build_image
build_image: shippableimages/ubuntu1404_nodejs

before_install:
# Activate the required node.js version
  - source ~/.nvm/nvm.sh && nvm install $SHIPPABLE_NODE_VERSION
  - node --version

# Create directories for test and coverage reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - npm install

# Running test
script:
  - npm test

# Copy coverage & test report to shippable folder
after_script:
  - cp ./coverage/coverage.xml ./shippable/codecoverage/
  - cp ./test_reports/report.xml ./shippable/testresults/
